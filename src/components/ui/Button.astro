---
import { cn } from "@/utils/cn";

interface Props {
  variant?: "primary" | "outline" | "ghost";
  size?: "sm" | "md" | "lg";
  href?: string;
  className?: string; // Additional classes for consumer
  [key: string]: any; // Allow other HTML attributes
}

const {
  variant = "primary",
  size = "md",
  href,
  className,
  ...rest
} = Astro.props;

const Tag = href ? "a" : "button";

const variants = {
  primary:
    "bg-navy text-white hover:bg-navy-dark shadow-[0_4px_14px_0_rgba(0,118,255,0.39)] hover:shadow-[0_6px_20px_rgba(0,118,255,0.23)] hover:scale-[1.02] active:scale-[0.98] border border-transparent relative overflow-hidden after:content-[''] after:absolute after:top-0 after:-left-[100%] after:w-full after:h-full after:bg-gradient-to-r after:from-transparent after:via-white/20 after:to-transparent after:skew-x-[-15deg] hover:after:animate-shine",
  outline:
    "border border-navy text-navy hover:bg-navy/5 hover:shadow-[0_0_15px_rgba(0,31,63,0.1)] hover:scale-[1.02] active:scale-[0.98]",
  ghost:
    "bg-transparent text-navy hover:bg-surface hover:scale-[1.02] active:scale-[0.98]",
};

const sizes = {
  sm: "h-8 px-4 text-sm",
  md: "h-12 px-8 text-base",
  lg: "h-14 px-10 text-lg",
};

const baseStyles =
  "inline-flex items-center justify-center rounded-[4px] font-display font-medium transition-all duration-300 ease-out focus:outline-none focus:ring-2 focus:ring-blue focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none";

const classes = cn(baseStyles, variants[variant], sizes[size], className);
---

<Tag href={href} class={classes} {...rest}>
  <slot />
</Tag>
